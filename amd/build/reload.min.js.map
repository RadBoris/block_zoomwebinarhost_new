{"version":3,"sources":["../src/reload.js"],"names":["define","$","log","fragment","templates","ajax","init","courseid","contextid","val","click","event","preventDefault","email","validate","test","toLowerCase","length","css","params","promise","call","methodname","args","then","loadFragment","done","html","M","core_formchangechecker","reset_form_dirty_state","replaceNodeContents","load_js","catch","error","console","c","e","stopPropagation","host","target","id","hostid","split","email_to_delete","innerText","trim","promise1","js","alert","focus","getScript"],"mappings":"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","sourcesContent":["define(['jquery', 'core/log', 'core/fragment', 'core/templates', 'core/ajax'], function($, log, fragment, templates, ajax\n    ) {\n\n    return {\n        init: function(courseid, contextid) {\n\t\t\tconst defaultValue = $('[name=\"email\"]').val();\n\n\t\t\t\t$('#id_add').click((event)=>{\n\t\t\t\t   event.preventDefault();\n\t\t\t\n\t\t\t\t   const email = $(\"input[name='email']\").val();\n\t\t\t           \tconst validate = (email) => {\n\t\t\t    \t\tconst expression = /(?!.*\\.{2})^([a-z\\d!#$%&'*+\\-\\/=?^_`{|}~\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]+(\\.[a-z\\d!#$%&'*+\\-\\/=?^_`{|}~\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]+)*|\"((([ \\t]*\\r\\n)?[ \\t]+)?([\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x7f\\x21\\x23-\\x5b\\x5d-\\x7e\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0d-\\x7f\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]))*(([ \\t]*\\r\\n)?[ \\t]+)?\")@(([a-z\\d\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]|[a-z\\d\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF][a-z\\d\\-._~\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]*[a-z\\d\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])\\.)+([a-z\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]|[a-z\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF][a-z\\d\\-._~\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]*[a-z\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])\\.?$/i;\n\t\t\t    \t\t\treturn expression.test(String(email).toLowerCase()) && String(email).length;\n\t\t\t\t   }\n\t\t\t\t\tif (!validate(email)) {\n\t\t\t\t        $(\"input[name='email']\").css({'border-color': 'red'});\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\n\t\t\t\t\tconst params = { courseid: courseid, email: email }\n\t\t\t\n\t\t\t\t\tvar promise = ajax.call([{\n\t\t\t\t\t\tmethodname:'block_zoomwebinarhost_create_webinar_host',\n\t\t\t\t\t    args: { courseid:courseid, email:email }\n\t\t\t\t\t}]);\n\t\t\t\n\t\t\t\t\tpromise[0].then((response)=> {\n\t\t\t\t\t\tfragment.loadFragment('block_zoomwebinarhost','formreload', contextid, params).done(function(html, js) {\n\t\t\t\t\t\t\tM.core_formchangechecker.reset_form_dirty_state();\n\t\t\t\t\t\t\ttemplates.replaceNodeContents($('.mform'), html, '');\n\t\t\t\t\t\t\tload_js();\n\t\t\t\t\t\t  })\n\t\t\t\t\t}).catch((error)=>{\n\t\t\t\t\t\tconsole.log(error);\nc\t\t\t\t\t})\n\t\t\t\t});\n\n\t\t\t\t$('[id*=\"id_delete\"]').click((e)=>{\n\t    \t\t\te.preventDefault();\n\t    \t\t\te.stopPropagation();\n\n\t\t\t\t\tconst host =  e.target.id;\n\t\t\t\t\tconst hostid = host.split(/\\_(?=[^\\_]+$)/)[1];\n\n\t\t\t\t\tconst email_to_delete = $('#fitem_id_host_'+hostid)[0].innerText.trim();\n\t\t\t\t\tconst params = { courseid: courseid, email: email_to_delete };\n\t\t\t\t\t\n\n\t\t\t\t\tvar promise1 = ajax.call([{\n\t\t\t\t\t\tmethodname:'block_zoomwebinarhost_delete_webinar_host',\n\t\t\t\t\t\targs: {courseid:courseid, email:email_to_delete}\n\t\t\t\t\t}]);\n\n\t\t\t\t\tpromise1[0].then((response)=> {\n\t\t\t\t\t\tfragment.loadFragment('block_zoomwebinarhost','formreload', contextid, params).done(function(html, js) {\n\t\t\t\t\t\t\ttemplates.replaceNodeContents($('.mform'), html, js)\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t}).catch((error)=>{\n\t\t\t\t\t\talert(error);\n\t\t\t\t\t})\n\t\t\t\t   });\n\t\t\t\t   \n\t\t\t\t$('#id_email').focus((e) => {\n\t\t\t\t\t$(e.target).val('').css({'border-color' : ''});\n\t\t\t   });\n\n\t\t\t   function load_js()\n\t\t\t   {\n\t\t\t\t//   var head= document.getElementsByTagName('head')[0];\n\t\t\t\t//   var script= document.createElement('script');\n\t\t\t\t//   script.src= '/blocks/zoomwebinarhost/amd/src/zoomwebinarhost.js';\n\t\t\t\t//   head.appendChild(script);\n\n\t\t\t\t  $.getScript(\"amd/src/zoomwebinarhost.js\", function(){\n\t\t\t\t\talert(\"Script loaded and executed.\");\n\t\t\t\t  });\n\t\t\t   }\n        \t}\n    \t};\n});"],"file":"reload.min.js"}